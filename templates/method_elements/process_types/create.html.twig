{% extends 'base.html.twig' %}

{% block title %} Create Process Types {% endblock %}

{% block body %}

  {# Warning messages #}
  <div class="mt-4">
    {% for label, messages in app.flashes %}
      {% for message in messages %}
        <div class="alert alert-{{ label }}">
          {{ message }}
        </div>
      {% endfor %}
    {% endfor %}
  </div>

  {# Form box #}
  <div class="card mt-4">

    <div class="card-header bg-info">
      <b>Create Process Types</b>
    </div>

    <div class="card-body">
      {{ form_start(form) }}


      <div id="processTypes">
        {{ form_row(form.name) }}
      </div>

      <div class="mb-3">
        <button type="button" class="btn btn-dark" id="add-new-type">
          Add another type
        </button>
      </div>{#test#}

      {{ form_row(form.Save) }}

      {{ form_end(form) }}
    </div>
  </div>

{% endblock %}

{% block javascripts %}
  {{ parent() }}
  <script>
    let artifactTemplate =
            `<div class="form-group">
                <label class="font-weight-bold required" for="artifact_name">Name</label>
                <div class="d-flex flex-row">
                    <input type="text" name="process_kind[name]" required="required" class="form-control">
                    <button type="button" class="btn btn-danger remove-processType">Remove</button>
                 </div>
             </div>`;

    $("#add-new-type").on("click",function () {
      $("#processTypes").append(artifactTemplate);
      $(".remove-processType").on("click",function () {
        $(this).parent().parent().remove();
      });
    });

  </script>
{% endblock %}